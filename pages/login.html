<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GiriÅŸ Yap / KayÄ±t Ol</title>
    <link rel="stylesheet" href="../styles/login.css">
<body>
    <div class="admin-button">
        <button onclick="location.href='admin.html'">Admin GiriÅŸi</button>
    </div>
    <div class="login-box">
        <div class="profile-icon">
            <img src="https://cdn-icons-png.flaticon.com/512/310/310818.png" alt="KullanÄ±cÄ± Profili">
        </div>

        <!-- GiriÅŸ Yap Formu -->
        <div class="form-container" id="login-form">
            <input type="text" id="username" placeholder="KullanÄ±cÄ± AdÄ±" required>
            <div style="position: relative;">
                <input type="password" id="password" placeholder="Åifre" required>
                <span class="toggle-password" onclick="togglePasswordVisibility('password')">ğŸ‘ï¸</span>
            </div>
            <div class="button-container">
                <button type="submit" onclick="login()">GiriÅŸ Yap</button>
                <div class="form-switch" onclick="toggleForm()">KayÄ±t Ol</div>
            </div>
            <div class="forgot-password">
                <a href="#" onclick="showForgotPasswordForm()">Åifremi Unuttum</a>
            </div>
        </div>

        <!-- Åifremi Unuttum Formu -->
        <div class="form-container forgot-password-email" id="forgot-password-form">
            <input type="email" id="forgot-email" placeholder="E-posta" required>
            <button type="button" onclick="resetPassword()">Åifreyi GÃ¶nder</button>
            <div class="form-switch" onclick="hideForgotPasswordForm()">Geri DÃ¶n</div>
        </div>

        <!-- KayÄ±t Ol Formu -->
        <div class="form-container" id="signup-form" style="display: none;">
            <input type="text" id="new-username" placeholder="KullanÄ±cÄ± AdÄ±" required>
            <input type="email" id="new-email" placeholder="E-posta" required>
            <div style="position: relative;">
                <input type="password" id="new-password" placeholder="Åifre" required>
                <span class="toggle-password" onclick="togglePasswordVisibility('new-password')">ğŸ‘ï¸</span>
            </div>
            <div style="position: relative;">
                <input type="password" id="confirm-password" placeholder="Åifreyi Onayla" required>
                <span class="toggle-password" onclick="togglePasswordVisibility('confirm-password')">ğŸ‘ï¸</span>
            </div>
            <div class="button-container">
                <button type="submit" onclick="signup()">KayÄ±t Ol</button>
                <div class="form-switch" onclick="toggleForm()">GiriÅŸ Yap</div>
            </div>
        </div>
    </div>

    <script>
        // Åifre gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼ toggle fonksiyonu
        function togglePasswordVisibility(inputId) {
            const input = document.getElementById(inputId);
            const type = input.type === 'password' ? 'text' : 'password';
            input.type = type;
        }

        // E-posta doÄŸrulama fonksiyonu
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        // Åifre doÄŸrulama fonksiyonu
        function validatePassword(password) {
            const minLength = 8;
            const hasUpperCase = /[A-Z]/.test(password);
            const hasLowerCase = /[a-z]/.test(password);

            return password.length >= minLength && hasUpperCase && hasLowerCase;
        }

        // KullanÄ±cÄ± adÄ± doÄŸrulama fonksiyonu
        function validateUsername(username) {
            const minLength = 8;
            const hasUpperCase = /[A-Z]/.test(username);
            const hasLowerCase = /[a-z]/.test(username);

            return username.length >= minLength && hasUpperCase && hasLowerCase;
        }

        // Form doÄŸrulama fonksiyonu
        function validateInput(inputId) {
            const input = document.getElementById(inputId);
            if (!input.value.trim()) {
                input.classList.add('error');
                return false;
            }
            input.classList.remove('error');
            return true;
        }

        // KayÄ±t fonksiyonu
        function signup() {
            const usernameValid = validateUsername(document.getElementById('new-username').value);
            const emailValid = validateEmail(document.getElementById('new-email').value);
            const passwordValid = validatePassword(document.getElementById('new-password').value);
            const confirmPasswordValid = validateInput('confirm-password');

            if (!usernameValid) {
                alert('KullanÄ±cÄ± adÄ± en az 8 karakter uzunluÄŸunda olmalÄ± ve hem bÃ¼yÃ¼k hem de kÃ¼Ã§Ã¼k harf iÃ§ermelidir.');
                return;
            }

            if (!emailValid) {
                alert('GeÃ§erli bir e-posta adresi girin.');
                return;
            }

            if (!passwordValid) {
                alert('Åifre en az 8 karakter uzunluÄŸunda olmalÄ± ve hem bÃ¼yÃ¼k hem de kÃ¼Ã§Ã¼k harf iÃ§ermelidir.');
                return;
            }

            const username = document.getElementById('new-username').value;
            const email = document.getElementById('new-email').value;
            const password = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;

            if (password !== confirmPassword) {
                alert('Åifreler eÅŸleÅŸmiyor. LÃ¼tfen tekrar deneyin.');
                return;
            }

            const user = {
                username: username,
                email: email,
                password: password
            };

            localStorage.setItem(username, JSON.stringify(user));
            alert('KayÄ±t baÅŸarÄ±lÄ±! GiriÅŸ yapabilirsiniz.');
            toggleForm();  // KayÄ±t sonrasÄ± giriÅŸ ekranÄ±na dÃ¶n
        }

        // GiriÅŸ fonksiyonu
        function login() {
            const usernameValid = validateInput('username');
            const passwordValid = validateInput('password');

            if (!usernameValid || !passwordValid) {
                alert('LÃ¼tfen tÃ¼m alanlarÄ± doldurduÄŸunuzdan emin olun.');
                return;
            }

            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            const storedUser = localStorage.getItem(username);

            if (!storedUser) {
                alert('KullanÄ±cÄ± bulunamadÄ±. LÃ¼tfen kayÄ±t olun.');
                return;
            }

            const user = JSON.parse(storedUser);

            if (user.password === password) {
                alert('GiriÅŸ baÅŸarÄ±lÄ±!');
                window.location.href = 'home.html';  // GiriÅŸ baÅŸarÄ±lÄ±ysa yÃ¶nlendirme yapÄ±lÄ±r
            } else {
                alert('Åifre yanlÄ±ÅŸ. LÃ¼tfen tekrar deneyin.');
            }
        }

        // Formlar arasÄ±nda geÃ§iÅŸ yapma fonksiyonu
        function toggleForm() {
            const loginForm = document.getElementById('login-form');
            const signupForm = document.getElementById('signup-form');
            if (loginForm.style.display === 'none') {
                loginForm.style.display = 'block';
                signupForm.style.display = 'none';
            } else {
                loginForm.style.display = 'none';
                signupForm.style.display = 'block';
            }
        }

        // Åifremi Unuttum formunu gÃ¶sterme
        function showForgotPasswordForm() {
            const loginForm = document.getElementById('login-form');
            const forgotPasswordForm = document.getElementById('forgot-password-form');
            loginForm.style.display = 'none';
            forgotPasswordForm.style.display = 'flex';
        }

        // Åifremi Unuttum formunu gizleme
        function hideForgotPasswordForm() {
            const loginForm = document.getElementById('login-form');
            const forgotPasswordForm = document.getElementById('forgot-password-form');
            loginForm.style.display = 'block';
            forgotPasswordForm.style.display = 'none';
        }

        // Åifreyi sÄ±fÄ±rlama fonksiyonu
        function resetPassword() {
            const email = document.getElementById('forgot-email').value;

            if (!validateEmail(email)) {
                alert('GeÃ§erli bir e-posta adresi girin.');
                return;
            }

            const users = Object.keys(localStorage);
            const user = users.find(u => {
                const data = JSON.parse(localStorage.getItem(u));
                return data.email === email;
            });

            if (user) {
                alert('Åifre sÄ±fÄ±rlama talimatlarÄ± e-posta adresinize gÃ¶nderilmiÅŸtir.');
                hideForgotPasswordForm();

                // Burada e-posta gÃ¶nderimini gerÃ§ekleÅŸtirin
                // GerÃ§ek e-posta gÃ¶nderimi iÃ§in sunucu tarafÄ± kodu gereklidir
                // AÅŸaÄŸÄ±daki kod sadece bir uyarÄ± simÃ¼lasyonu saÄŸlar
                console.log("Åifre sÄ±fÄ±rlama talimatlarÄ± ${email} adresine gÃ¶nderildi.");
            } else {
                alert('E-posta adresi bulunamadÄ±.');
            }
        }
    </script>
</body>
</html>